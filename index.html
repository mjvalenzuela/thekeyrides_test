<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Map - TKR</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

    <!-- Mapbox GL JS -->
    <script src='https://api.mapbox.com/mapbox-gl-js/v3.0.1/mapbox-gl.js'></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v3.0.1/mapbox-gl.css' rel='stylesheet' />

    <!-- Custom styles -->
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="stylesheet" href="css/streetview.css">
</head>

<body>
    <!-- Main container -->
    <div id="map-container">

        <!-- Sidebar -->
        <aside id="sidebar">
            <div id="sidebar-header">
                <h5 id="sidebar-title">Map Controls</h5>
                <button id="sidebar-toggle" type="button" aria-label="Toggle sidebar">
                    <i class="bi bi-chevron-left"></i>
                </button>
            </div>

            <div id="sidebar-content">

                <!-- Unified filters with legend -->
                <div class="control-group" id="category-filters">
                    <h6>Map Layers</h6>
                    <div class="unified-filters-container">
                        <!-- Generated dynamically with checkbox + icon + name -->
                    </div>
                </div>

                <!-- Search -->
                <div class="control-group">
                    <h6>Search</h6>
                    <div class="search-container">
                        <input type="text" id="search-input" class="form-control" placeholder="Search for a place...">
                        <button id="search-btn" type="button" aria-label="Search">
                            <i class="bi bi-search"></i>
                        </button>
                    </div>
                </div>

                <!-- Navigation system information -->
                <div class="control-group" id="routing-info" style="display: none;">
                    <h6>ðŸš— Navigation</h6>
                    <div class="alert alert-info" style="font-size: 12px; padding: 8px 12px; margin-bottom: 0;">
                        <i class="bi bi-info-circle"></i>
                        <strong>Tip:</strong> Click on any point and select "Go" to get directions with different transport options.
                    </div>
                </div>

            </div>
        </aside>

        <!-- External toggle button (visible when sidebar is collapsed) -->
        <button id="sidebar-toggle-external" type="button" aria-label="Show sidebar">
            <i class="bi bi-list"></i>
        </button>

        <!-- Main map -->
        <div id="map"></div>

        <!-- Location controls -->
        <div id="location-controls">
            <button id="locate-btn" class="btn btn-light btn-sm" title="My location" aria-label="Show my location">
                <i class="bi bi-geo-alt"></i>
            </button>
        </div>

        <!-- Loading indicator -->
        <div id="loading" class="loading-overlay">
            <div class="d-flex flex-column align-items-center">
                <div class="spinner-border text-primary mb-3" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
                <p class="text-muted">Loading map...</p>
            </div>
        </div>

    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Map scripts -->
    <script src="config/config.js"></script>
    <script src="js/dataService.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/streetView.js"></script>
    <!-- Draggable popup functionality -->
    <script src="js/draggablePopup.js"></script>
    <!-- Routing system script -->
    <script src="js/routing.js"></script>
    <script src="js/map.js"></script>

</body>

</html>